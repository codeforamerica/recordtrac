<!-- This template is to initiate a new request. -->

{% extends "base.html" %}

{% block title %}Public records{% endblock title%}



{% block content %}

<!-- validation jQuery only working for request_text:required and request_email:email only http://docs.jquery.com/Plugins/Validation 
      try this validation as well https://github.com/jzaefferer/jquery-validation -->
      <form name="input" class="form-horizontal" id="submitRequest" method="post" action="/new" autocomplete="on"novalidate="novalidate">
        <fieldset>

          <legend>Submit a Request</legend>

          <div class="control-group">
            <label class="control-label" for="requestTextarea">What are you trying to find?</label>
            <div class="controls">
              <textarea id="requestTextarea" autofocus  name="request_text" rows="3" cols="20" placeholder="Describe your request. Be as specific as possible." ></textarea>
              <span class="request_field_explanation"><p>{{"Enter records request" | explain_action("What")}}</p><p><em>{{"Enter records request" | explain_action("Who")}}</em> {{"Enter records request" | explain_action("Action")}}</p></span>
            </div>
          </div>
            
          <div class="control-group">
            <label class="control-label" for="inputEmail">Your email</label>
            <div class="controls">
              <input name="request_email" type="email" id="inputEmail" placeholder="yourname@email.com" />
              <span class="request_field_explanation"><em>{{"Enter email address" | explain_action("Who")}}</em> {{"Enter email address" | explain_action("Action")}} </span>
            </div>
          </div>
          
          <div class="control-group">
            <label class="control-label" for="inputName">Your name</label>
            <div class="controls">
              <input name="request_alias" type="text" id="inputName" placeholder="Your Name" />
              <span class="request_field_explanation"><em>{{"Enter name" | explain_action("Who")}}</em>{{"Enter name" | explain_action("Action")}}</span>
            </div>
          </div>
        
          <div class="control-group">
            <label class="control-label" for="inputPhone">Your phone number</label>
            <div class="controls">
              <input name="request_phone" type="tel" id="inputPhone" placeholder="(510) 555-1234" maxlength="14" />
              <span class="request_field_explanation"><em>{{"Enter phone number" | explain_action("Who")}}</em>  {{"Enter phone number" | explain_action("Action")}}</span>
            </div>
          </div>

          <div class="control-group">
            <div class="controls">
              <button type="submit" class="btn btn-large btn-primary">Request</button>
            </div>
          </div>
          
        </fieldset>
      </form>

<div id="no_email" class="alert alert-block alert-error fade in">
  <!-- <button type="button" class="close" data-dismiss="alert">Ã—</button> -->
  <h4 class="alert-heading">Oops, you forgot to provide an email address.</h4>
  <p>Your email is how we contact you.  If you choose to leave it blank, you will not receive updates about your request.  Your request may take longer or be dismissed if it is missing important information.</p>
  <p><a class="btn btn-danger " href="#" class="close" data-dismiss="alert">Enter email</a> <a class="btn disabled" href="#">Submit request anyway</a></p>
</div>

{% endblock content %}
{% block bottom_script %}
  <script>
    /* validates add a request form */
    $(document).ready(function(){
       
        $("#submitRequest").validate({
          rules: {
            request_text: {
              required: true,
              minlength: 2
                 },
            request_email: {
              required: true
                 } 
             },
          highlight: function(element) {
              $(element).closest('.control-group').removeClass('success').addClass('error');
              $("#no_email").alert()
            },
          success: function(element) {
            element
            .text('OK!').addClass('valid')
            .closest('.control-group').removeClass('error').addClass('success');
            }
        });

    });
  </script>
{% endblock bottom_script %}