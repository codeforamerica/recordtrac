<!-- This template is to initiate a new request. -->

{% extends "base.html" %}
{% from 'help_text.html' import help %}

{% block title %}Public records{% endblock title %}
{% block custom_css_links %}
    <!-- used for department dropdown -->
    <link rel=stylesheet type=text/css
          href="{{ url_for('static', filename='css/plugins/jquery-ui-1.10.4.custom.css') }}">
    <link rel=stylesheet type=text/css href="{{ url_for('static', filename='css/plugins/jquery-ui.css') }}">
    <link rel=stylesheet type=text/css href="{{ url_for('static', filename='css/sidebar.css') }}">
    <link rel=stylesheet type=text/css href="{{ url_for('static', filename='css/new_request.css') }}">
    <link rel=stylesheet type=text/css href="{{ url_for('static', filename='css/plugins/bootstrap-fileupload.css') }}">
    <link rel=stylesheet type=text/css href="{{ url_for('static', filename='css/case.css') }}">

{% endblock custom_css_links %}
{% block container %}


    <!-- start of static form -->

    <div class="row-fluid">
        <div class="span8">
            <h1>Create a new records request</h1>

            <p>Please make your request specific so you receive the fastest service. After you submit a FOIL request you
                will receive a confirmation number so you can track the status of the response. The agency will notify
                you about how much time is required to respond to your request.</p>
        </div>

        <div class="span4">
            <div class="form-nav">
                <div class="active" id="s1">
                    <h4><a>Step 1</a></h4>
                </div>
                <div id="s2">
                    <h4><a>Step 2</a></h4>
                </div>
            </div>
        </div>

        <form name="newrequest" class="form-horizontal" id="submitRequest" method="post" action="/new"
              autocomplete="off" novalidate="novalidate" enctype="multipart/form-data">
            <div class="row-fluid">
                <div class="step" id="step1">
                    <div class="span8">
                        <fieldset>
                            <div class="control-group">
                                <h2>
                                    <small>Category*</small>
                                </h2>
                                {{ form.request_category(id="category", class="combobox") }}
                            </div>
                            <div class="control-group">
                                <h2>
                                    <small>What agency has the records you want?*</small>
                                </h2>
                                {{ form.request_agency(id="agency", class="combobox") }}
                            </div>

                            <div class="control-group">
                                <h2>
                                    <small>What is the topic of your request?*</small>
                                </h2>
                                <textarea name="topic" class="input-block-level" , rows="2" , id="request_summary" ,
                                          placeholder="Please provide a short summary of your request" )></textarea>
                            </div>
                        </fieldset>
                        <div id="button1" class="btn btn-primary btn-large input-block-level">Next</div>
                    </div>
                    <div class="span4">
                        <div class="sideblock">
                            <h3>Example Topic</h3>

                            <p>Public Advocate Emails from 2015</p>
                        </div>
                        <h5>Note: The agency, category, and topic of your request will be visible to the public. Do not
                            enter personal information here.</h5>

                        <p>* indicates required field</p>
                    </div>
                </div>
            </div>
            <div class="row-fluid">
                <div class="step" id="step2">
                    <fieldset>
                        <div class="row-fluid">
                            <div class="span8">
                                <div class="control-group">
                                    <h2>
                                        <lead>Details about your records request</lead>
                                    </h2>
                                    <textarea rows="8" , id="request_text" , class="input-block-level"
                                              placeholder="Provide more information about your request to help the City locate the record. If don’t know the record name, describe type of information you think it would contain and the approximate date range. Do not include private info – such as social security # or credit card."
                                              )></textarea>
                                </div>
                            </div>
                            <div class="span4">
                                <div class="sideblock">
                                    <h3>Example Request</h3>

                                    <p>Topic: Public Advocate Emails from 2015</p>

                                    <p>Emails that mention bike lanes or bicycle lanes from the Public Advocate's Office
                                        between July 27, 2015 and September 10, 2015</p>
                                </div>
                                <h5>Note: The details of your request will not be visible to the public.</h5>

                                <p>* indicates required field</p>
                            </div>
                        </div>
                        <div class="row-fluid">
                            <div class="span8">
                                <h2>
                                    <lead>Personal Information</lead>
                                </h2>
                                <p>Your name and contact information will not be posted to this site. This information
                                    is required and will be shared only with a City Agency and only for the purpose of
                                    fulfilling your request. You must provide at least one way to reach you.</p>

                                <div class="row-fluid">
                                    <div class="control-group span6">
                                        <h2>
                                            <small>{{ form.request_first_name.label.text }}</small>
                                        </h2>
                                        <input class="input-block-level" type="text" placeholder="John"/>
                                    </div>
                                    <div class="control-group span6">
                                        <h2>
                                            <small>Last Name*</small>
                                        </h2>
                                        <input class="input-block-level" type="text" placeholder="Doe"/>
                                    </div>
                                </div>
                                <div class="control-group">
                                    <h2>
                                        <small>Role/Title</small>
                                    </h2>
                                    <input class="input-block-level" type="text"
                                           placeholder="Your role in your organization (if applicable)"/>
                                </div>
                                <div class="control-group">
                                    <h2>
                                        <small>Organization</small>
                                    </h2>
                                    <input class="input-block-level" type="text"
                                           placeholder="Your organization (if applicable)"/>
                                </div>

                                <h2>
                                    <lead>Contact Information</lead>
                                </h2>
                                <p>No information entered in this section will be visibile to the public. <em>Please
                                    Note: At least one method of communication is required</em></p>

                                <div class="control-group">
                                    <h2>
                                        <small>Email Address</small>
                                    </h2>
                                    <input class="input-block-level" , type="email" ,
                                           placeholder="requester@email.com"/>

                                    <h2>
                                        <small>Phone Number</small>
                                    </h2>
                                    <input class="input-block-level" type="tel" placeholder="(555) 555-5555"/>

                                    <h2>
                                        <small>Fax Number</small>
                                    </h2>
                                    <div class="spacer spacer_phone" style="background-color: #FFFFFF;">
                                        <input class="input-block-level" type="tel" placeholder="(555) 555-5555"/>
                                    </div>
                                    <h2>
                                        <small>Address</small>
                                    </h2>
                                    <small>Address Line 1</small>
                                    <input class="input-block-level" type="text" placeholder="123 Main Street"/>
                                    <small>Address Line 2</small>
                                    <input class="input-block-level" type="text" placeholder="Apartment 3D"/>

                                    <div class="row-fluid">
                                        <div class="span5">
                                            <small>City</small>
                                            <div class="spacer">
                                                <input class="input-block-level" type="text" placeholder="New York"/>
                                            </div>
                                        </div>
                                        <div class="span4">
                                            <small>State</small>
                                            <div class="spacer">
                                                <select class="combobox">
                                                    <option value="AL">Alabama</option>
                                                    <option value="AK">Alaska</option>
                                                    <option value="AZ">Arizona</option>
                                                    <option value="AR">Arkansas</option>
                                                    <option value="CA">California</option>
                                                    <option value="CO">Colorado</option>
                                                    <option value="CT">Connecticut</option>
                                                    <option value="DE">Delaware</option>
                                                    <option value="DC">District Of Columbia</option>
                                                    <option value="FL">Florida</option>
                                                    <option value="GA">Georgia</option>
                                                    <option value="HI">Hawaii</option>
                                                    <option value="ID">Idaho</option>
                                                    <option value="IL">Illinois</option>
                                                    <option value="IN">Indiana</option>
                                                    <option value="IA">Iowa</option>
                                                    <option value="KS">Kansas</option>
                                                    <option value="KY">Kentucky</option>
                                                    <option value="LA">Louisiana</option>
                                                    <option value="ME">Maine</option>
                                                    <option value="MD">Maryland</option>
                                                    <option value="MA">Massachusetts</option>
                                                    <option value="MI">Michigan</option>
                                                    <option value="MN">Minnesota</option>
                                                    <option value="MS">Mississippi</option>
                                                    <option value="MO">Missouri</option>
                                                    <option value="MT">Montana</option>
                                                    <option value="NE">Nebraska</option>
                                                    <option value="NV">Nevada</option>
                                                    <option value="NH">New Hampshire</option>
                                                    <option value="NJ">New Jersey</option>
                                                    <option value="NM">New Mexico</option>
                                                    <option value="NY">New York</option>
                                                    <option value="NC">North Carolina</option>
                                                    <option value="ND">North Dakota</option>
                                                    <option value="OH">Ohio</option>
                                                    <option value="OK">Oklahoma</option>
                                                    <option value="OR">Oregon</option>
                                                    <option value="PA">Pennsylvania</option>
                                                    <option value="RI">Rhode Island</option>
                                                    <option value="SC">South Carolina</option>
                                                    <option value="SD">South Dakota</option>
                                                    <option value="TN">Tennessee</option>
                                                    <option value="TX">Texas</option>
                                                    <option value="UT">Utah</option>
                                                    <option value="VT">Vermont</option>
                                                    <option value="VA">Virginia</option>
                                                    <option value="WA">Washington</option>
                                                    <option value="WV">West Virginia</option>
                                                    <option value="WI">Wisconsin</option>
                                                    <option value="WY">Wyoming</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="span3">
                                            <small>Zip Code</small>
                                            <div class="spacer">
                                                <input class="input-block-level" type="text" placeholder="12345"/>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                {% if config['ENVIRONMENT'] != 'LOCAL' %}
                                    {{ recaptcha }}
                                {% endif %}
                                <div id="requestButton" class="spacer">
                                    <button id="button2" title="submit_request_button"
                                            class="btn btn-primary btn-large input-block-level">
                                        Submit request
                                    </button>
                                </div>
                            </div>
                        </div>
                </div>
                </fieldset>
            </div>
        </form>
    </div>


    <!-- end of static form -->
{% endblock container %}

{% block custom_script_links %}
    <!-- used for department dropdown -->
    <script type="text/javascript"
            src="{{ url_for('static', filename='js/plugins/jquery-ui-1.10.4.custom.min.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='js/new_request.js') }}"></script>
    {% if date %}
        <script type="text/javascript">
            $(document).ready(function () {
                $("input[id^='request_date']").datepicker().val("{{ date }}");
            });
        </script>
    {% else %}
        <script type="text/javascript">
            $(document).ready(function () {
                $("input[id^='request_date']").datepicker().val('');
            });
        </script>
    {% endif %}

    <script type="text/javascript"
            src="{{ url_for('static', filename='js/plugins/jquery.placeholder.min.js') }}"></script>

    <script type="text/javascript">
        $(function () {
            // Invoke the plugin
            $('input, textarea').placeholder({customClass: 'placeholder'});
        });
    </script>

    <script type="text/javascript">
        $(document).ready(function () {
            $('#step1').fadeIn('fast');

            $('#button1').click(function () {

                // validation

                if( !$('#agency').val() || !$('#request_summary').val() ) {
                    alert("All indicated information is required. Please complete all fields");
                    exit();
                }

                // scroll to the top of the form if touch device

                if (Modernizr.touch) { 
                    $('html, body').animate({
                        scrollTop: $("#submitRequest").offset().top
                    }, 500);
                } else { 
                    // don't scroll to the top
                }

                // fade out step1, fade in step2
                $('#step1').fadeOut('fast', function () {
                });
                $( "#s1" ).removeClass( "active" );
                $( "#s2" ).addClass( "active" );
                $('#step2').fadeIn('slow', function () {
                });
            });

            $('#button2').click(function () {

                // validation

                if ((document.newrequest.field.value == "")
                        || (document.newrequest.field.value == "")
                        || (document.newrequest.field.value == "")


                ) {
                    alert("All  indicated information is required. Please complete all fields");
                    exit();
                }

            });

            $('#back').click(function () {
                // scroll to the top of the form
                if (Modernizr.touch) { 
                    $('html, body').animate({
                        scrollTop: $("#submitRequest").offset().top
                    }, 500);
                } else { 
                    // don't scroll to the top
                }

                // fade out step1, fade in step2
                $('#step2').fadeOut('fast', function () {
                });
                $( "#s2" ).removeClass( "active" );
                $( "#s1" ).addClass( "active" );
                $('#step1').fadeIn('slow', function () {
                });
            });

            $('#s1 a').click(function () {
                // when step one is clicked, go to step 1

                if (Modernizr.touch) { 
                    $('html, body').animate({
                        scrollTop: $("#submitRequest").offset().top
                    }, 500);
                } else { 
                    // don't scroll to the top
                }


                $('#step2').fadeOut('fast', function () {
                });
                $( "#s2" ).removeClass( "active" );
                $( "#s1" ).addClass( "active" );
                $('#step1').fadeIn('slow', function () {
                });
            });

            $('#s2 a').click(function () {
                // when step two is clicked, go to step 1

                // validation

                if( !$('#agency').val() || !$('#request_summary').val() ) {
                    alert("All indicated information is required. Please complete all fields");
                    exit();
                }

                if (Modernizr.touch) { 
                    $('html, body').animate({
                        scrollTop: $("#submitRequest").offset().top
                    }, 500);
                } else { 
                    // don't scroll to the top
                }

                $('#step1').fadeOut('fast', function () {
                });
                $( "#s1" ).removeClass( "active" );
                $( "#s2" ).addClass( "active" );
                $('#step2').fadeIn('slow', function () {
                });
            });

        });
    </script>
{% endblock custom_script_links %}
